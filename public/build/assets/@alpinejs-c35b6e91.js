function S(t){let e=()=>{let l,i=localStorage;return t.interceptor((r,a,s,o,d)=>{let u=l||`_x_${o}`,n=f(u,i)?g(u,i):r;return s(n),t.effect(()=>{let c=a();m(u,c,i),s(c)}),n},r=>{r.as=a=>(l=a,r),r.using=a=>(i=a,r)})};Object.defineProperty(t,"$persist",{get:()=>e()}),t.magic("persist",e),t.persist=(l,{get:i,set:r},a=localStorage)=>{let s=f(l,a)?g(l,a):i();r(s),t.effect(()=>{let o=i();m(l,o,a),r(o)})}}function f(t,e){return e.getItem(t)!==null}function g(t,e){return JSON.parse(e.getItem(t,e))}function m(t,e,l){l.setItem(t,JSON.stringify(e))}var p=S;export{p as m};
